# Addons: https://kops.sigs.k8s.io/addons/
  awsLoadBalancerController:
    enabled: true
  certManager:
    enabled: true
  nodeTerminationHandler:
    enabled: true
    enableRebalanceMonitoring: true
    enableSQSTerminationDraining: true
    managedASGTag: "aws-node-termination-handler/managed"
  nodeProblemDetector:
    enabled: true
    memoryRequest: 32Mi
    cpuRequest: 10m
  podIdentityWebhook:
    enabled: true


#removing taints from master nodes
kubectl taint nodes --all=true node-role.kubernetes.io/control-plane:NoSchedule-


#installed inginx-ingress controller
helm upgrade --install ingress-nginx ingress-nginx \
  --repo https://kubernetes.github.io/ingress-nginx \
  --namespace ingress-nginx --create-namespace

# replace default cni from kubenet to amazonvpc
  networking:
    amazonvpc:
      env:
      - name: WARM_IP_TARGET
        value: "10"
      - name: AWS_VPC_K8S_CNI_LOGLEVEL
        value: debug

#use spot instances by specifying max_price
maxPrice: "0.02"

# kill/drain worker node (set its max and min number to 0)

# increase maximum number of pods that can be scheduled on a node
kubelet:
  maxPods: 50